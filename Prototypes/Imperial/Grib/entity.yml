- type: entity
  name: grib camera
  id: MobGribCamera
  description: "aboba"
  components:
  - type: Sprite
    overrideContainerOcclusion: true # Ghosts always show up regardless of where they're contained.
    drawdepth: Ghosts
    noRot: true
    layers:
      - sprite: /Textures/Imperial/Grib/tiles.rsi
        state: mob
  - type: Transform
    anchored: false
  #- type: Marker
  #- type: Clickable
  #- type: InteractionOutline
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 15
        mask:
        - GhostImpassable
  - type: InputMover
  - type: Input
    context: "human"
  - type: LagCompensation
  - type: MobMover
  - type: Actions
  - type: Alerts
  - type: Appearance
  - type: RotationVisuals
    defaultRotation: 0
    horizontalRotation: 0
  - type: DoAfter
  - type: Examiner
  - type: ContentEye
  - type: CameraRecoil
  - type: MindContainer
  - type: MovementSpeedModifier
    baseWalkSpeed: 6
    baseSprintSpeed: 6
  - type: Polymorphable
  - type: StatusIcon
  #- type: BioDanger
  #  reagents:
  #  - Косм. очист.
  #  - Адезинтриф.
  #  - Резоциллин
  #  - Циталопор.
  #  causticDamage:
  #    types:
  #      Poison: 0.2
  #      Heat: 0.1
  #      Caustic: 0.03
  - type: CargoSellBlacklist
  - type: Eye
    drawFov: false
  #- type: Ghost
  - type: MovementIgnoreGravity
  - type: CanMoveInAir
  - type: Physics
    bodyType: KinematicController
    bodyStatus: InAir
  - type: NoSlip
  - type: GhostRole
    allowMovement: true
    makeSentient: true
    name: Гриб
    description: Стратегия
    rules: |
      Нажмите [color=red]Shift +1 / 2[/color] или [color=red]L[/color] для того, чтобы увидеть все действия.
      Захватите как можно больше!
      Только вы можете видить свечение от вас.
  - type: GhostTakeoverAvailable
  - type: Visibility
    layer: 2
  #- type: BioOverlay
  - type: ReplacementAccent
    accent: biodanger
  - type: Speech
  - type: PointLight
    radius: 4.5
    color: white
    energy: 2
    castShadows: false
  - type: Grib

- type: Tag
  id: GribTile

- type: Tag
  id: GribTileBase

- type: Tag
  id: GribArmy

- type: Tag
  id: GribMob

- type: Tag
  id: GribArmor

- type: Tag
  id: GribUzel

- type: Tag
  id: GribCore

- type: damageModifierSet
  id: Grib
  coefficients:
    Blunt: 0.5
    Slash: 0.9
    Piercing: 0.85
    Heat: 2

- type: entity
  id: GribCore
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 1000
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: core
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
      - GribUzel
      - GribCore
    - type: GribFarm
      pointPerSecond: 1
    - type: GribTile
      spread: true
      own: true

- type: entity
  id: GribUzel
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 250
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: uzel
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
      - GribUzel
    - type: GribFarm
      pointPerSecond: 0
    - type: GribTile
      spread: true
      own: true

- type: entity
  id: GribFarm
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 40
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: farm
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
    - type: GribFarm
      pointPerSecond: 0.5
    - type: PointLight
      castShadows: false
      color: yellow
      energy: 1
      radius: 1.5

- type: entity
  id: GribArmyFast
  name: mycelium
  parent: GribArmy
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: TimedSpawner
      prototypes:
      - GribMobSmallFast
      chance: 1
      intervalSeconds: 45
      minimumEntitiesSpawned: 1
      maximumEntitiesSpawned: 160

- type: entity
  id: GribArmyTank
  name: mycelium
  parent: GribArmy
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: TimedSpawner
      prototypes:
      - GribMobSmallTank
      chance: 1
      intervalSeconds: 85
      minimumEntitiesSpawned: 1
      maximumEntitiesSpawned: 160

- type: entity
  id: GribArmy
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 40
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: army
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
      - GribArmy
    - type: Timer
    - type: TimedSpawner
      prototypes:
      - GribMobSmall
      chance: 1
      intervalSeconds: 60
      minimumEntitiesSpawned: 1
      maximumEntitiesSpawned: 160
    - type: GribFarm
      pointPerSecond: 0

- type: entity
  id: GribHeal
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 40
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: heal
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
      - GribArmy
    - type: GribFarm
      pointPerSecond: 0
    - type: GribTile
      heal: true

- type: entity
  id: GribArmor
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 220
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: armor
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
      - GribArmor
    - type: MovementSpeedModifier
      walkSpeedModifier: 0.12
      sprintSpeedModifier: 0.12
      ignoreWhitelist:
        tags:
          - GribMob

- type: entity
  id: GribArmorUp
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 450
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: armorup
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
    - type: Fixtures
      fixtures:
        fix1:
          #hard: false
          density: 250
          shape:
            !type:PhysShapeAabb
            bounds: "-0.5,-0.5,0.5,0.5"
          mask:
          - MachineMask
          layer:
          - MidImpassable
          - BulletImpassable
          - Opaque
          - WallLayer
    - type: Occluder

- type: entity
  id: GribReflect
  name: mycelium
  parent: GribMain
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 12
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: reflect
      drawdepth: Overdoors
    - type: Transform
      anchored: true
    - type: Tag
      tags:
      - GribTile
    - type: Reflect
      enabled: true
      reflectProb: 1
      spread: 90

- type: entity
  name: GribMobSmall
  parent: SimpleSpaceMobBase
  id: GribMobSmall
  description: They're a grib.
  components:
    - type: Sprite
      drawdepth: Mobs
      sprite: Imperial/Grib/tiles.rsi
      layers:
      - map: ["enum.DamageStateVisualLayers.Base"]
        state: little_red_mushroom_animation
    - type: Physics
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.25
          density: 50
          mask:
          - MobMask
          layer:
          - MobLayer
    - type: Appearance
    - type: Bloodstream
      bloodMaxVolume: 0
    - type: MeleeWeapon
      animation: WeaponArcFist
      range: 1.55
      attackRate: 1
      hidden: true
      angle: 0
      soundHit:
      collection: AlienClaw
      damage:
        groups:
          Brute: 3
        types:
          Bloodloss: 3
          Structural: 10
    - type: Puller
    - type: Tag
      tags:
        - CannotSuicide
        - DoorBumpOpener
        - FootstepSound
        - GribMob
    - type: MobThresholds
      thresholds:
        0: Alive
        75: Dead
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 75
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: MovementSpeedModifier
      baseWalkSpeed : 4
      baseSprintSpeed : 4
    - type: PointLight
      castShadows: false
      color: red
      energy: 1
      radius: 1.5
    - type: NpcFactionMember
      factions:
        - Xeno
    - type: InputMover
    - type: MobMover
    - type: HTN
      rootTask:
        task: SimpleHostileCompound
    - type: SlowOnDamage
      speedModifierThresholds:
        10: 1
        45: 0.6
    - type: StaminaDamageOnHit
      damage: 22
    - type: MovementAlwaysTouching
    - type: TimedDespawn
      lifetime: 600

- type: entity
  name: GribMobSmallFast
  parent: SimpleSpaceMobBase
  id: GribMobSmallFast
  description: They're a fast.
  components:
    - type: Sprite
      drawdepth: Mobs
      sprite: Imperial/Grib/tiles.rsi
      layers:
      - map: ["enum.DamageStateVisualLayers.Base"]
        state: little_blue_mushroom_animation
    - type: Physics
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.15
          density: 50
          mask:
          - MobMask
          layer:
          - MobLayer
    - type: Appearance
    - type: Bloodstream
      bloodMaxVolume: 0
    - type: MeleeWeapon
      animation: WeaponArcFist
      range: 1.3
      attackRate: 0.6
      hidden: true
      angle: 0
      soundHit:
      collection: AlienClaw
      damage:
        groups:
          Brute: 1.5
        types:
          Bloodloss: 1.5
          Structural: 10
    - type: Puller
    - type: Tag
      tags:
        - CannotSuicide
        - DoorBumpOpener
        - FootstepSound
        - GribMob
    - type: MobThresholds
      thresholds:
        0: Alive
        55: Dead
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 55
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: MovementSpeedModifier
      baseWalkSpeed : 6
      baseSprintSpeed : 6
    - type: PointLight
      castShadows: false
      color: blue
      energy: 1
      radius: 1.5
    - type: NpcFactionMember
      factions:
        - Xeno
    - type: InputMover
    - type: MobMover
    - type: HTN
      rootTask:
        task: SimpleHostileCompound
    - type: SlowOnDamage
      speedModifierThresholds:
        10: 1
        35: 0.6
    - type: StaminaDamageOnHit
      damage: 12
    - type: MovementAlwaysTouching
    - type: TimedDespawn
      lifetime: 400

- type: entity
  name: GribMobSmallTank
  parent: SimpleSpaceMobBase
  id: GribMobSmallTank
  description: They're a t  ank.
  components:
    - type: Sprite
      drawdepth: Mobs
      sprite: Imperial/Grib/tiles.rsi
      layers:
      - map: ["enum.DamageStateVisualLayers.Base"]
        state: little_green_mushroom_animation
    - type: Physics
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.25
          density: 50
          mask:
          - MobMask
          layer:
          - MobLayer
    - type: Appearance
    - type: Bloodstream
      bloodMaxVolume: 0
    - type: MeleeWeapon
      animation: WeaponArcFist
      range: 1.5
      attackRate: 0.4
      hidden: true
      angle: 0
      soundHit:
      collection: AlienClaw
      damage:
        groups:
          Brute: 4
        types:
          Bloodloss: 4
          Structural: 10
    - type: Puller
    - type: Tag
      tags:
        - CannotSuicide
        - DoorBumpOpener
        - FootstepSound
        - GribMob
    - type: MobThresholds
      thresholds:
        0: Alive
        125: Dead
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 125
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: MovementSpeedModifier
      baseWalkSpeed : 2.5
      baseSprintSpeed : 2.5
    - type: PointLight
      castShadows: false
      color: green
      energy: 1
      radius: 1.5
    - type: NpcFactionMember
      factions:
        - Xeno
    - type: InputMover
    - type: MobMover
    - type: HTN
      rootTask:
        task: SimpleHostileCompound
    - type: SlowOnDamage
      speedModifierThresholds:
        10: 1
        95: 0.6
    - type: StaminaDamageOnHit
      damage: 32
    - type: MovementAlwaysTouching
    - type: TimedDespawn
      lifetime: 700

- type: entity
  name: GribMobChad
  parent: SimpleSpaceMobBase
  id: GribMobChad
  description: They're a grib.
  components:
    - type: MovementAlwaysTouching
    - type: Sprite
      drawdepth: Mobs
      sprite: Imperial/Grib/tiles.rsi
      layers:
      - map: ["enum.DamageStateVisualLayers.Base"]
        state: big
    - type: Physics
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.35
          density: 50
          mask:
          - MobMask
          layer:
          - MobLayer
    - type: Appearance
    - type: Bloodstream
      bloodMaxVolume: 0
    - type: MeleeWeapon
      animation: WeaponArcFist
      range: 1.55
      attackRate: 1
      hidden: true
      angle: 0
      soundHit:
      collection: AlienClaw
      damage:
        groups:
          Brute: 6
        types:
          Bloodloss: 5
          Structural: 15
    - type: Puller
    - type: Tag
      tags:
        - CannotSuicide
        - DoorBumpOpener
        - FootstepSound
        - GribMob
    - type: MobThresholds
      thresholds:
        0: Alive
        275: Dead
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 276
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: MovementSpeedModifier
      baseWalkSpeed : 3
      baseSprintSpeed : 3
    - type: PointLight
      castShadows: false
      color: red
      energy: 2
      radius: 1.5
    - type: NpcFactionMember
      factions:
        - Xeno
    - type: InputMover
    - type: MobMover
    - type: HTN
      rootTask:
        task: SimpleHostileCompound
    - type: SlowOnDamage
      speedModifierThresholds:
        10: 1
        145: 0.8
        225: 0.6
    - type: StaminaDamageOnHit
      damage: 24
    #- type: Kudzu
    #  growthTickChance: 0
    #  spreadChance: 0
    #  damageRecovery:
    #    types:
    #      Slash: -0.8
    #      Heat: -0.2
    #      Cold: -0.5
    #      Blunt: -0.8
    - type: GhostTakeoverAvailable
    - type: GhostRole
      makeSentient: true
      name: ghost-role-information-grib-name
      description: ghost-role-information-grib-description
      rules: ghost-role-information-grib-rules

- type: entity
  id: GribMain
  name: mycelium
  description: A rapidly growing cluster of meaty tendons. WHY ARE YOU STOPPING TO LOOK AT IT?!
  placement:
    mode: SnapgridCenter
    snap:
      - Wall
  components:
    - type: MeleeSound
      soundGroups:
        Brute:
          path: "/Audio/Weapons/slash.ogg"
    - type: Sprite
      sprite: Imperial/Grib/tiles.rsi
      state: main
      drawdepth: Overdoors
    - type: Appearance
    - type: Clickable
    - type: Transform
      anchored: true
    - type: Physics
    - type: Fixtures
      fixtures:
        fix1:
          #hard: false
          density: 7
          shape:
            !type:PhysShapeAabb
            bounds: "-0.5,-0.5,0.5,0.5"
          mask:
          - MachineMask
          layer:
          #- MidImpassable
          - BulletImpassable
          - Opaque
    - type: Damageable
      damageModifierSet: Grib
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 45
        behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: GribTile
    - type: Barotrauma
      damage:
        types:
          Blunt: 0
    - type: Flammable
      fireSpread: true
      damage:
       types:
         Heat: 1
    #- type: GrowingKudzu
    #  growthTickChance: 0.05
    - type: AtmosExposed
    - type: ActiveEdgeSpreader
    #- type: EdgeSpreader
    #  id: Kudzu
    - type: MovementSpeedModifier
      walkSpeedModifier: 0.4
      sprintSpeedModifier: 0.4
      ignoreWhitelist:
        tags:
          - GribMob
    - type: Tag
      tags:
      - GribTile
      - GribTileBase
    - type: Airtight
      fixVacuum: true
      noAirWhenFullyAirBlocked: false
